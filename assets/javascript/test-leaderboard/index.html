<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Leaderboard OrderByChild Way</title>
	<!-- <link rel="stylesheet" type="text/css" href="assets/css/reset.css"> -->
	<!-- <link rel="stylesheet" type="text/css" href="assets/css/style.css"> -->
	<!-- Browser tab icon
	<link rel="icon" type="image/ico" href="assets/images/favicon-marvel.ico"> -->
	
	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<!-- Link to Moment.js should go here -->
	<script src="https://cdn.jsdelivr.net/momentjs/2.12.0/moment.min.js"></script>
	<!-- Link to Firebase -->
	<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>


</head>

<body>
	<!-- Pseudo 01f: Check all links - bootstrap - Jumbotron -->
	<div class="container">

		<!-- Jumbotron -->
		<div class="jumbotron" style="background-color: black; color: white">

		<h3 class="text-center">Firebase Leaderboard Beta</h3>
		<h3 class="text-center">User Input Hard Code Skeleton Scenarios</h3>

		<!-- <div id="jq-check" class="panel-body">Container for JQ</div> -->
		<!-- <div id="js-check" class="panel-body">Container for JS</div> -->
		<!-- <div id="firebase-check" class="panel-body">Container for Firebase</div> -->

		<!-- <button id="submit" class="btn btn-primary">Set Firebase Object</button> -->

		</div>
		
		<div class="row">
			<div class="col-lg-12">
		
			<!-- Current Leaderboard -->
				<div class="panel panel-primary">
					<div class="panel-heading">

					</div>
					<div class="panel-body">
						<table class="table table-hover" id='leaderboardTable'>
							<thead>
								<tr>
									<th>Player Name</th>
									<th>Score</th>
								</tr>
							</thead>
							<tbody id="leaderboardBody">
								
							</tbody>
						</table>
					</div>
				</div>

				<!-- Add Player Result  -->
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title"><strong>Add Player Result</strong></h3>
					</div>
					<div class="panel-body">
		

					<!-- Entry Form -->
					<form>

						<div class="form-group">
							<label for="">Player 1 Name</label>
							<input type="text" class="form-control" id="playerNameInput1" value="Kent">
						</div>

						<div class="form-group">
							<label for="">Score 1</label>
							<input type="number" class="form-control" id="scoreInput1" value="10">
						</div>

						<div class="form-group">
							<label for="">Player 2 Name</label>
							<input type="text" class="form-control" id="playerNameInput2" value="Omar">
						</div>

						<div class="form-group">
							<label for="">Score 2</label>
							<input type="number" class="form-control" id="scoreInput2" value="20">
						</div>

<!-- 						<button type="submit" class="btn btn-primary" id="set1a">Set1a</button>

						<button type="submit" class="btn btn-primary" id="set1b">Set1b</button>

						<button type="submit" class="btn btn-primary" id="push1a">Push1a</button>

						<button type="submit" class="btn btn-primary" id="update1a">Update1a</button>

						<button type="submit" class="btn btn-primary" id="update1b">Update1b</button> -->

						<button type="submit" class="btn btn-primary" id="sort1a">Sort1a</button>

<!-- 						<button type="submit" class="btn btn-primary" id="set2">Set2</button> -->

						<button type="submit" class="btn btn-primary" id="deleteall1">DeleteAll1</button>

					</form>

					</div>
				</div>

				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title"><strong>Codes</strong></h3>
					</div>
					<div class="panel-body">
						<p id="codeDisplay">What da hell</p>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- Latest compiled and minified CSS & JS -->
	<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>

	<!-- Link to javascript file -->
	<!-- <script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script> -->
	<script type="text/javascript">

	// Pseudo 01: check all links
	// Pseudo 01a: check all links - jq - to be comment out
	// $("#jq-check").html("JQ CHECK");
	// Pseudo 01b: check all links - js - to be comment out
	// document.getElementById("js-check").innerHTML = "JS CHECK";


	// Initialize Firebase
	var config = {
	    apiKey: "AIzaSyCBIQ0gzyvDA8GRGDYMAQAO6Jq5tovTc6M",
	    authDomain: "fir-practice-efcb4.firebaseapp.com",
	    databaseURL: "https://fir-practice-efcb4.firebaseio.com",
	    storageBucket: "",
	};

	firebase.initializeApp(config);

	var database = firebase.database();

	database.ref().orderByChild('scoreInverse').on('child_added', function(snapshot){
		
		var playerName = snapshot.val().playerName;
		var score = snapshot.val().score;

		$('#leaderboardTable > tbody').append(
			'<tr><td>' + playerName + '</td><td>' + score + '</td></tr>'
		);

		// return "meow";

	});

	$('#sort1a').on('click', function(){
		
		var playerName = $('#playerNameInput1').val().trim();
		var score = parseInt($('#scoreInput1').val().trim());

		database.ref(playerName).update({
			playerName : playerName,
			score : score,
			scoreInverse : -score
		});

		$('#leaderboardTable > tbody').empty();

		database.ref().orderByChild('scoreInverse').on('child_added', function(childSnapshot, prevChildKey){
			
			var playerName = childSnapshot.val().playerName;
			var score = childSnapshot.val().score;

			$('#leaderboardTable > tbody').append(
				'<tr><td>' + playerName + '</td><td>' + score + '</td></tr>'
			);

			// return "meow";

		});

		// reload();

		return false;
	});



	// }).then(function(result){
	// 	console.log(result);
	// });

	// This is just a button to wipe firebase clean
	$('#deleteall1').on('click', function(){
		database.ref().remove();

		return false;
	});

	</script>


</body>

</html>

<!-- 	// var dbArray = [];

	// database.ref().orderByChild('scoreInverse').on('child_added', function(snapshot, prevChildKey){

	// database.ref().on('child_added', function(snapshot, prevChildKey){

		// puts snapshot of firebase to an array
		// dbArray.push(snapshot.val());

		// var newArr = dbArray.sort(function(a, b) {
		// 	return a.score - b.score;
		// });

		// 	console.log(newArr);
		// 	console.log('__________________________')

		// function scoreBoard(arr) {
		// 	arr.forEach(function(item, index, arr) {
		// 		console.log('item', playerName.playerName);

			// $("#leaderboardTable > tbody").html(
			// "<tr><td>" + playerName + "</td><td>" + score + "</td></tr>"
			// );
		// 	});

		// };

		// scoreBoard(newArr);


			// Player Info
			// console.log(playerName);
			// console.log(score);

		// $('#leaderboardTable > tbody').empty();

		// adding new table container and displaying firebase sorted data
		// $("#leaderboardTable > tbody").append(
		// 	"<tr><td>" + playerName + "</td><td>" + score + "</td></tr>"
		// );

	// });


	// console.log('db array', dbArray) -->


<!-- 	// $('#update1a').on('click', function(){
	// 	update1a();
	// 	document.getElementById('codeDisplay').innerHTML = update1a;
	// 	return false;
	// });


	// function set1a(){

	// 	var playerName = $('#playerNameInput1').val().trim();
	// 	var score = parseInt($('#scoreInput1').val().trim());

	// 	database.ref().set({
	// 		players : {
	// 			playerName : playerName,
	// 			score : score,
	// 			scoreInverse : -score
	// 		}
	// 	});
	// };

	// $('#set1a').on('click', function(){
	// 	set1a();
	// 	document.getElementById('codeDisplay').innerHTML = set1a;
	// 	return false;
	// });

	// function set1b(){

	// 	var playerName = $('#playerNameInput1').val().trim();
	// 	var score = parseInt($('#scoreInput1').val().trim());

	// 	database.ref(playerName).set({
	// 		// players : {
	// 			// playerName : playerName,
	// 		score : score,
	// 		scoreInverse : -score
	// 		// }
	// 	});		
	// };

	// $('#set1b').on('click', function(){
	// 	set1b();
	// 	document.getElementById('codeDisplay').innerHTML = set1b;
	// 	return false;
	// });

	// function push1a(){

	// 	var playerName = $('#playerNameInput1').val().trim();
	// 	var score = parseInt($('#scoreInput1').val().trim());

	// 	database.ref().push({
	// 		playerName : playerName,
	// 		score : score,
	// 		scoreInverse : -score
	// 	});
	// };

	// $('#push1a').on('click', function(){
	// 	push1a();
	// 	document.getElementById('codeDisplay').innerHTML = push1a;
	// 	return false;
	// });

	// function update1b(){

	// 	var playerName = $('#playerNameInput1').val().trim();
	// 	var score = parseInt($('#scoreInput1').val().trim());
	// 	var playerKey = database.ref().child().key;
	// 		console.log(playerKey);

	// 	database.ref(playerKey).update({
	// 		score : score
	// 	});
	// };

	// $('#update1b').on('click', function(){
	// 	update1b();
	// 	document.getElementById('codeDisplay').innerHTML = update1b;
	// 	return false;
	// }); -->





<!-- // var arr = [
// 		{
// 			name: 'freddie',
// 			score: 3
// 		},
// 		{
// 			name: 'Kent',
// 			score: 2
// 		},
// 		{
// 			name: 'Elliot',
// 			score: 1
// 		}		
// 	];

			//console.log('firebase ref', database.ref());
			// Snapshot info
			//console.log('Object', snapshot.val()); -->





